{
    "meta": {
        "context": {
            "context": {
                "type": "object",
                "properties": {
                    "schema": {
                        "description": "The psych-DS schema",
                        "type": "object"
                    },
                    "dataset": {
                        "description": "Properties and contents of the entire dataset",
                        "type": "object",
                        "properties": {
                            "dataset_description": {
                                "description": "Contents of /dataset_description.json",
                                "type": "object"
                            },
                            "files": {
                                "description": "List of all files in dataset",
                                "type": "array"
                            },
                            "tree": {
                                "description": "Tree view of all files in dataset",
                                "type": "object"
                            },
                            "ignored": {
                                "description": "Set of ignored files",
                                "type": "array"
                            }
                        }
                    },
                    "path": {
                        "description": "Path of the current file",
                        "type": "string"
                    },
                    "suffix": {
                        "description": "Suffix of current file",
                        "type": "string"
                    },
                    "extension": {
                        "description": "Extension of current file including initial dot",
                        "type": "string"
                    },
                    "sidecar": {
                        "description": "Sidecar metadata constructed via the inheritance principle",
                        "type": "object"
                    },
                    "columns": {
                        "description": "TSV columns, indexed by column header, values are arrays with column contents",
                        "type": "object",
                        "additionalProperties": {
                            "type": "array"
                        }
                    },
                    "json": {
                        "description": "Contents of the current JSON file",
                        "type": "object"
                    },
                    "keywords": {
                        "description": "List of key-value pairings associated with the data file, derived from the filename",
                        "type": "array",
                        "properties": {
                            "study": {
                                "name": "Study",
                                "description": "Label designating a given study",
                                "type": "string"
                            },
                            "site": {
                                "name": "Site",
                                "description": "Label designating the site where the data was collected",
                                "type": "string"
                            },
                            "subject": {
                                "name": "Subject",
                                "description": "Label designating the subject corresponding to the data in the file",
                                "type": "string"
                            },
                            "session": {
                                "name": "Session",
                                "description": "Label designating a given session of the study",
                                "type": "string"
                            },
                            "task": {
                                "name": "Task",
                                "description": "Label designating the type of task in which the data was collected",
                                "type": "string"
                            },
                            "condition": {
                                "name": "Condition",
                                "description": "Label designating the condition under which the data was collected",
                                "type": "string"
                            },
                            "trial": {
                                "name": "Trial",
                                "description": "Label designating the trial associated with the data",
                                "type": "string"
                            },
                            "stimulus": {
                                "name": "Stimulus",
                                "description": "Label designating the stimulus item associated with the data",
                                "type": "string"
                            },
                            "description": {
                                "name": "Description",
                                "description": "Label describing the data file in question",
                                "type": "string"
                            }
                        }
                    }
                }
            }
        }
    },
    "objects": {
        "common_principles": {
            "dataset": {
                "name": "Dataset",
                "display_name": "Dataset",
                "description": "A set of behavioral data acquired for the purpose of a particular study or set of studies.\n"
            },
            "extension": {
                "name": "File extension",
                "display_name": "File extension",
                "description": "A portion of the file name after the left-most period (`.`) preceded by any other alphanumeric.\nFor example, `.gitignore` does not have a file extension,\nbut the file extension of 'study-1_data.csv' is '.csv'.\nNote that the left-most period is included in the file extension.\n"
            },
            "keywords": {
                "name": "Keywords",
                "display_name": "Keywords",
                "description": "A set of identifying key-value duples associated with a given data file.\nKeys are limited to a vocabulary of:\n  - study\n  - site\n  - subject\n  - session\n  - task\n  - condition\n  - trial\n  - stimulus\n  - description\n"
            }
        },
        "metadata": {
            "name": {
                "name": "name",
                "display_name": "Name",
                "description": "Name of the dataset.\n",
                "type": "string"
            },
            "schemaVersion": {
                "name": "schemaVersion",
                "display_name": "Schema Version",
                "description": "The version of the data specification that this dataset conforms to.\n",
                "type": "string"
            },
            "description": {
                "name": "description",
                "display_name": "Description",
                "description": "Detailed description of the dataset.\n",
                "type": "string"
            },
            "variableMeasured": {
                "name": "variableMeasured",
                "display_name": "Variable Measured",
                "description": "List of the column names that appear in the data files.\n",
                "type": "array"
            },
            "author": {
                "name": "author",
                "display_name": "Author",
                "description": "List of individuals who contributed to the creation/curation of the dataset.\n",
                "type": "array",
                "items": {
                    "type": "string"
                }
            },
            "citation": {
                "name": "citation",
                "display_name": "Citation",
                "description": "Citation data for referencing the dataset, or URL/path for structured citation file.\n",
                "type": "string"
            },
            "license": {
                "name": "license",
                "display_name": "Kucebse",
                "description": "Author-assigned 'license' for data/material use. While this can be a string of text, \na URL pointing to a specific license file (online or in the project directory) is preferred.\n",
                "type": "string"
            },
            "funder": {
                "name": "funder",
                "display_name": "Funder",
                "description": "List of sources of funding (grant numbers).\n",
                "type": "string"
            },
            "url": {
                "name": "url",
                "display_name": "URL",
                "description": "Canonical source for the dataset.\n",
                "type": "string"
            },
            "identifier": {
                "name": "identifier",
                "display_name": "Identifier",
                "description": "Identifier that uniquely distinguishes the dataset.\n",
                "type": "string"
            },
            "usageInfo": {
                "name": "usageInfo",
                "display_name": "Privacy Policy",
                "description": "A string to indicate whether any of the values in the dataset are desired to be shareable.\nThis does not guarantee that the dataset HAS been shared or HAS been de identified,.\n",
                "type": "string"
            },
            "keywords": {
                "name": "keywords",
                "display_name": "Keywords",
                "description": "Keywords with which to tag the dataset for reference.\n",
                "type": "array"
            }
        },
        "extensions": {
            "json": {
                "value": ".json",
                "display_name": "JavaScript Object Notation",
                "description": "A JSON file.\n\nTop-level and collated metadata files are all stored in the JSON format in psych-DS.\n"
            },
            "csv": {
                "value": ".csv",
                "display_name": "Comma-Separated Values",
                "description": "A CSV file with a header row of column names spanning all filled columns."
            }
        },
        "files": {
            "CHANGES": {
                "display_name": "Changelog",
                "file_type": "regular",
                "description": "Version history of the dataset (describing changes, updates and corrections) MAY be provided in\nthe form of a `CHANGES` text file. (.txt or .md).\n"
            },
            "README": {
                "display_name": "README",
                "file_type": "regular",
                "description": "File describing the dataset in detail. This is an OPTIONAL file, and only one README file should appear in dataset.\n"
            },
            "dataset_description": {
                "display_name": "Dataset Description",
                "file_type": "regular",
                "description": "The metadata file `dataset_description.json` is a JSON file describing the dataset.\n"
            },
            "DataFile": {
                "display_name": "CSV Datafile",
                "file_type": "regular",
                "description": "A CSV file under the /data directory in which the official psych-DS compliant data from\nthe dataset is stored.\n"
            },
            "data": {
                "display_name": "Data",
                "file_type": "directory",
                "description": "The directory in which to store all datafiles from the dataset.\n"
            },
            "analysis": {
                "display_name": "Analysis",
                "file_type": "directory",
                "description": "A directory in which to store any code used to analyze the data in /data.\n"
            },
            "results": {
                "display_name": "Results",
                "file_type": "directory",
                "description": "A directory in which to store any results generated using the data in /data.\n"
            },
            "materials": {
                "display_name": "Materials",
                "file_type": "directory",
                "description": "A directory in which to store any materials used to conduct the study.\n"
            },
            "documentation": {
                "display_name": "Documentation",
                "file_type": "directory",
                "description": "A directory in which to store any project-related documentation that is used for conducting the study (e.g. consent forms)\n"
            },
            "products": {
                "display_name": "Products",
                "file_type": "directory",
                "description": "A directory in which to store any Any relevant products resulting from the project \n(e.g., publications, posters, software descriptions, presentations, etc.) \n"
            },
            "DirectoryMetadata": {
                "display_name": "Directory Metadata",
                "file_type": "regular",
                "description": "A json file in which to store metadata that applies to all datafiles \nwithin the containing directory or within any nested subdirectories. \nFields from the file replace the values of the global dataset_description object.\n"
            },
            "SidecarMetadata": {
                "display_name": "Sidecar Metadata",
                "file_type": "regular",
                "description": "A json file in which to store metadata that applies to a specific datafile\nwithin the containing directory. Fields from the file replace the values\nof the global dataset_description object, and overwrite any fields\nshared with the directory metadata."
            }
        }
    },
    "rules": {
        "files": {
            "tabular_data": {
                "data": {
                    "Datafile": {
                        "suffix": "data",
                        "extensions": [
                            ".csv"
                        ],
                        "baseDir": "data",
                        "arbitraryNesting": true,
                        "usesKeywords": true,
                        "nonCanonicalKeywordsAllowed": true,
                        "fileRegex": "([a-z]+-[a-zA-Z0-9]+)(_[a-z]+-[a-zA-Z0-9]+)*_data\\.csv",
                        "code": "MISSING_DATAFILE",
                        "level": "error",
                        "reason": "It is required to include at least one valid csv datafile under the data subdirectory "
                    }
                }
            },
            "common": {
                "core": {
                    "dataset_description": {
                        "level": "error",
                        "path": "/dataset_description.json",
                        "code": "MISSING_DATASET_DESCRIPTION",
                        "reason": "It is required to include a 'dataset_description.json' in the base directory"
                    },
                    "README": {
                        "level": "warning",
                        "stem": "README",
                        "extensions": [
                            ".md",
                            ".txt"
                        ],
                        "code": "MISSING_README_DOC",
                        "reason": "It is recommended to include a 'README.md' or 'README.txt' file in the base directory"
                    },
                    "CHANGES": {
                        "level": "ignore",
                        "stem": "CHANGES",
                        "extensions": [
                            ".md",
                            ".txt"
                        ],
                        "code": "MISSING_CHANGES_DOC",
                        "reason": "It is recommended to include a 'CHANGES.md' or 'CHANGES.txt' file in the base directory"
                    },
                    "data": {
                        "level": "error",
                        "path": "/data",
                        "directory": true,
                        "code": "MISSING_DATA_DIRECTORY",
                        "reason": "It is required to include a subdirectory named 'data' in the base directory"
                    },
                    "analysis": {
                        "level": "ignore",
                        "path": "/analysis",
                        "directory": true,
                        "code": "MISSING_ANALYSIS_DIRECTORY",
                        "reason": "It is recommended to include subdirectory named 'analysis' in the base directory"
                    },
                    "results": {
                        "level": "ignore",
                        "path": "/results",
                        "directory": true,
                        "code": "MISSING_RESULTS_DIRECTORY",
                        "reason": "It is recommended to include subdirectory named 'results' in the base directory"
                    },
                    "materials": {
                        "level": "ignore",
                        "path": "/materials",
                        "directory": true,
                        "code": "MISSING_MATERIALS_DIRECTORY",
                        "reason": "It is recommended to include subdirectory named 'materials' in the base directory"
                    },
                    "documentation": {
                        "level": "ignore",
                        "path": "/documentation",
                        "directory": true,
                        "code": "MISSING_DOCUMENTATION_DIRECTORY",
                        "reason": "It is recommended to include subdirectory named 'documentation' in the base directory"
                    }
                }
            },
            "metadata": {
                "DirectoryMetadata": {
                    "path": "file_metadata.json",
                    "baseDir": "data",
                    "arbitraryNesting": true,
                    "level": "warning",
                    "code": "MISSING_DIRECTORY_METADATA",
                    "reason": "It is optional to include a json metadata file within a data subdirectory that \napplies to all files within the current directory and its subdirectories\n"
                },
                "SidecarMetadata": {
                    "baseDir": "data",
                    "arbitraryNesting": true,
                    "suffix": "data",
                    "level": "warning",
                    "extensions": [
                        ".json"
                    ],
                    "code": "MISSING_SIDECAR_METADATA",
                    "reason": "It is optional to include a json metadata file within a data subdirectory\nthat applies to a specific csv datafile within the current directory"
                }
            }
        },
        "dataset_metadata": {
            "dataset_description": {
                "selectors": [
                    "path == \"dataset_description.json\""
                ],
                "fields": {
                    "name": "required",
                    "description": "required",
                    "variableMeasured": "required",
                    "author": "recommended",
                    "citation": "recommended",
                    "license": "recommended",
                    "funder": "recommended",
                    "url": "recommended",
                    "identifier": "recommended",
                    "privacyPolicy": "recommended",
                    "keywords": "recommended"
                },
                "namespace": "http://schema.org/",
                "jsonld": true,
                "contains_all_columns": true,
                "variableMeasured_obeys_schemaOrg": true
            }
        },
        "errors": {
            "JsonInvalid": {
                "code": "JSON_INVALID",
                "message": "Not a valid JSON file.\n",
                "level": "error",
                "selectors": [
                    "extension == \".json\""
                ]
            },
            "FileRead": {
                "code": "FILE_READ",
                "message": "We were unable to read this file.\nMake sure it contains data (file size > 0 kB) and is not corrupted,\nincorrectly named, or incorrectly symlinked.\n",
                "level": "error"
            },
            "JsonSchemaValidationError": {
                "code": "JSON_SCHEMA_VALIDATION_ERROR",
                "message": "Invalid JSON file. The file is not formatted according the schema.\n",
                "level": "error",
                "selectors": [
                    "extension == \".json\""
                ]
            },
            "EmptyFile": {
                "code": "EMPTY_FILE",
                "level": "error",
                "reason": "empty files not allowed."
            },
            "InvalidJsonEncoding": {
                "code": "INVALID_JSON_ENCODING",
                "message": "JSON files must be valid utf-8.\n",
                "level": "error",
                "selectors": [
                    "extension == \".json\""
                ]
            },
            "JsonKeyRequired": {
                "code": "JSON_KEY_REQUIRED",
                "level": "error",
                "reason": "The dataset_description.json file is missing a key listed as required."
            },
            "JsonKeyRecommended": {
                "code": "JSON_KEY_RECOMMENDED",
                "level": "warning,",
                "reason": "A data files JSON sidecar is missing a key listed as recommended."
            },
            "CsvColumnMissing": {
                "code": "CSV_COLUMN_MISSING",
                "level": "error",
                "reason": "A required column is missing"
            },
            "NotIncluded": {
                "code": "NOT_INCLUDED",
                "level": "warning",
                "reason": "Files with such naming scheme are not part of psych-DS specification.\nUnder the rules of psych-DS, non-specified files are allowed to be included,\nbut if you would like to avoid receiving this warning moving forward, you can include\nin your \".psychdsignore\" file\n"
            },
            "MissingRequiredElement": {
                "code": "MISSING_REQUIRED_ELEMENT",
                "level": "error",
                "reason": "Your dataset is missing an element that is required under the psych-DS specification."
            },
            "NoHeader": {
                "code": "NO_HEADER",
                "level": "error",
                "reason": "CSV data files must contain a valid header with at least one column."
            },
            "HeaderRowMismatch": {
                "code": "HEADER_ROW_MISMATCH",
                "level": "error",
                "reason": "The header and all rows for CSV data files must contain the same number of columns."
            },
            "RowidValuesNotUnique": {
                "code": "ROWID_VALUES_NOT_UNIQUE",
                "level": "error",
                "reason": "Columns within CSV data files with the header \"row_id\" must contain unique values in every row."
            },
            "WrongMetadataLocation": {
                "code": "WRONG_METADATA_LOCATION",
                "level": "warning",
                "reason": "The main metadata file must be located within the root directory"
            },
            "KeywordFormattingError": {
                "code": "KEYWORD_FORMATTING_ERROR",
                "level": "error",
                "reason": "All datafiles must use psych-DS keyword formatting. That is, datafile names must consist of\na series of keyword-value pairs, separated by underscores, with keywords using only lowercase\nalphabetic characters and values using any alphanumeric characters of either case. The file must\nend with '_data.csv'. In other words, files must follow this regex: \n/([a-z]+-[a-zA-Z0-9]+)(_[a-z]+-[a-zA-Z0-9]+)*_data\\.csv/\n"
            },
            "UnofficialKeywordWarning": {
                "code": "UNOFFICIAL_KEYWORD_WARNING",
                "level": "warning",
                "reason": "Although it is not recommended, datafiles are permitted to use keywords other than those provided\nin the official psych-DS specification. If you do choose to use unofficial keywords, please ensure\nthat they are clearly defined within your research community and used consistently across relevant datasets.\n"
            },
            "UnofficialKeywordError": {
                "code": "UNOFFICIAL_KEYWORD_ERROR",
                "level": "error",
                "reason": "Names for data files must not include keywords other than those listed in the psych-DS schema."
            },
            "InvalidJsonFormatting": {
                "code": "INVALID_JSON_FORMATTING",
                "level": "error",
                "reason": "One of your metadata files in not in valid JSON format."
            },
            "IncorrectDatasetType": {
                "code": "INCORRECT_DATASET_TYPE",
                "level": "error",
                "reason": "Your metadata is missing the required schema.org \"Dataset\" type"
            },
            "MissingDatasetType": {
                "code": "MISSING_DATASET_TYPE",
                "level": "error",
                "reason": "Your metadata is missing the \"@type/type\" property, which is required."
            },
            "UnknownNamespace": {
                "code": "UNKNOWN_NAMESPACE",
                "level": "warning",
                "reason": "The psych-DS validator only has access to one external vocabulary, \"http://schema.org\";\nany other reference to an external schema is permitted, but the validity of the terms used\ncannot be confirmed.\n"
            },
            "ObjectTypeMissing": {
                "code": "OBJECT_TYPE_MISSING",
                "level": "warning",
                "reason": "For compliance with the schema.org ontology, all objects within the metadata (with a few exceptions)\nthat appear as the value of a schema.org key/property must contain a \"@type\" key with a valid schema.org type \nas its value.\n"
            },
            "InvalidSchemaorgProperty": {
                "code": "INVALID_SCHEMAORG_PROPERTY",
                "level": "warning",
                "reason": "The schema.org ontology contains a fixed set of legal properties which can be applied to objects within the metadata.\n If schema.org is used as the only @context within your metadata, then all properties will be interpreted as schema.org properties.\n Using an invalid schema.org property is not considered an error in the psych-DS specification, but it should be understood\n that such usages result in the property in question not being interpretable by machines.\n"
            },
            "InvalidObjectType": {
                "code": "INVALID_OBJECT_TYPE",
                "level": "warning",
                "reason": "Properties in the schema.org ontology have selective restrictions on which types of objects can be used for their values.\nincluding an object with a @type that does not match the selective restrictions of its property is not an error in psych-DS,\nbut it will result in the object in question not being interpretable by machines.\n"
            },
            "ExtensionMismatch": {
                "code": "EXTENSION_MISMATCH",
                "level": "error",
                "reason": "Extension used by file does not match allowed extensions for its suffix."
            }
        },
        "common_principles": [
            "dataset",
            "extension",
            "keywords"
        ],
        "csv_data": {
            "Datafile": {
                "selectors": [
                    "extension == \".csv\"",
                    "suffix == \"data\"",
                    "baseDir == \"data\""
                ],
                "columns": true
            }
        }
    }
}